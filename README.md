# HiaPortFusion (HAProxy+GOST 一键端口聚合转发管理)

## ✨ 项目简介

**HiaPortFusion** 是一个面向服务器的聚合端口转发管理工具，集成 HAProxy (高性能 TCP 转发) 与 GOST (轻量级 UDP 转发)，支持**多端口批量、TCP+UDP 聚合、IPv4/IPv6 双栈、规则热管理、一键安装/卸载/升级/重载**，适合用于游戏代理、端口中转、内网穿透等场景。

## 🚀 特性

- 🟢 **TCP+UDP 端口聚合**，每条规则独立支持 IPv4 或 IPv6
- 🟢 一键管理菜单，支持添加、删除、批量清空、热重载规则
- 🟢 HAProxy + GOST，自动适配平台架构
- 🟢 支持多端口批量转发，日志可随时查看
- 🟢 一键安装/升级/卸载本体及所有依赖
- 🟢 开源 Bash 脚本，支持自定义二次开发

## ⚡️ 快速开始

### 1. 一键安装/升级

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/hiapb/HiaPortFusion/main/install.sh)
```

### 2. 使用方法

- 安装成功后，自动进入菜单界面。
- 首次使用请先执行【1】安装本体及依赖（HAProxy、GOST）。
- 添加转发规则后，会自动重启相关服务。

### 3. 菜单选项

```
=========== HiaPortFusion (HAProxy+GOST, IPv4/IPv6) ===========

  1. 安装 HiaPortFusion
  2. 更新 HiaPortFusion
  3. 卸载 HiaPortFusion

  4. 添加转发规则
  5. 删除单条规则
  6. 清空全部规则
  7. 查看当前规则
  8. 查看日志

  0. 退出
===========================================================
```

## 📋 规则说明

- 每条规则支持 TCP/UDP 聚合，菜单添加时需指定端口、目标节点、协议族 (IPv4/IPv6)。
- **示例:**
    - 源端口：58359
    - 目标节点：111.111.111.111:58359
    - 协议族：IPv4
    - → 本地 58359 端口所有 TCP 流量由 HAProxy 转发，UDP 流量由 GOST 转发至目标

- 规则数据保存在 `/etc/hipf-rules.txt`，格式为：`端口 目标地址 监听地址`。

## 🔎 注意事项

- 本脚本需在 root 权限下运行，适配 Debian/Ubuntu 系统。
- 首次用请先选择【1】安装，若架构不支持 GOST 会自动提示。
- 支持 IPv6 时需目标格式加中括号，如 `[2408:8000::8b6:7c48]:58359`
- 所有规则修改均自动热重载，无需手动重启进程。

## 💡 典型用途

- 游戏加速服务器 TCP+UDP 聚合转发
- 内网穿透、端口批量中转、流量分流
- 个人站点、API、Bot 代理等多场景

## 👤 作者 & 贡献

- 脚本作者：[@hiapb](https://github.com/hiapb)
- 如有建议、反馈或二次开发需求欢迎提交 Issues

---

> **免责声明**  
> 本脚本仅供学习研究，请勿用于任何非法用途。使用过程中如有疑问，欢迎在项目 Issue 区留言交流。

